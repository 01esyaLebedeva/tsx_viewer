# System Patterns: tsx_viewer

## 1. Архитектура

Проект использует гибридную архитектуру, стандартную для приложений на `Electron`:

*   **Основной процесс (Main Process):**
    *   Реализован в `electron/main.js`.
    *   Отвечает за жизненный цикл приложения: создание окна (`BrowserWindow`), обработку событий приложения (например, закрытие всех окон).
    *   Не имеет прямого доступа к DOM и UI. Его основная задача — быть точкой входа и контейнером для веб-приложения.
    *   В режиме разработки загружает контент с `localhost`, предоставляемого Vite. В рабочем режиме — из собранных статических файлов (`dist/index.html`).

*   **Процесс рендеринга (Renderer Process):**
    *   Это React-приложение, находящееся в директории `src/`.
    *   Весь пользовательский интерфейс и основная логика приложения (загрузка файлов, редактирование, отображение в "песочнице") реализованы здесь.
    *   Выполняется в контексте веб-страницы внутри окна Electron.
    *   Использует `contextIsolation`, что является современной практикой безопасности в Electron. Это означает, что у процесса рендеринга нет прямого доступа к API Node.js.

*   **Взаимодействие процессов:**
    *   На данный момент взаимодействие между основным процессом и процессом рендеринга минимально. Основной процесс просто загружает веб-приложение. В будущем, для доступа к файловой системе (например, для сохранения файлов), может быть использован механизм `ipcMain` и `ipcRenderer` для безопасного обмена сообщениями.

## 2. Ключевые проектные решения и паттерны

*   **Компонентная архитектура:** Весь UI построен на основе React-компонентов. Основной компонент — `App.tsx`, который управляет состоянием и рендерит дочерние компоненты.
*   **Использование "песочницы" (Sandboxing):** Вместо того чтобы пытаться самостоятельно реализовать компиляцию и безопасное выполнение TSX, проект делегирует эту задачу библиотеке `@codesandbox/sandpack-react`. Это ключевое архитектурное решение, которое значительно упрощает проект и повышает его безопасность.
*   **Состояние на стороне клиента:** Управление состоянием (например, содержимое открытого файла) происходит полностью на стороне клиента в React-компонентах (`useState`). Для более сложных сценариев в будущем может потребоваться более продвинутое решение для управления состоянием (например, Zustand или Redux Toolkit).
*   **Интернационализация (i18n):** Логика перевода вынесена в `i18n.ts` и использует `i18next`. Текстовые строки хранятся в JSON-файлах (`public/locales/`), что позволяет легко добавлять новые языки.